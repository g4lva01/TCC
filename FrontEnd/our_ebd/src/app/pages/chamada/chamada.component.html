<div class="layout">
  <app-menu></app-menu>
  <div class="main-content">
    <div class="header">
      <h3 id="title">EBD</h3>
    </div>
  </div>
</div>

<div class="chamada-container">
  <div class="trimestre-selector">
    <label>Selecione o trimestre:</label>
    <select [(ngModel)]="trimestreSelecionado" (change)="onTrimestreChange()">
      <option *ngFor="let t of trimestres" [value]="t">{{ t }}</option>
    </select>
  </div>

  <div class="domingos-trimestre" *ngIf="domingosTrimestre.length > 0">
    <label>Domingos do trimestre:</label>
    <div class="botoes-domingos">
      <button *ngFor="let d of domingosTrimestre"
              (click)="selecionarDomingo(d)"
              [class.selecionado]="data === d">
        {{ d | date:'dd/MM/yyyy' }}
      </button>
    </div>
  </div>

  <h3>Turma: {{ turmaNome }}</h3>

  <div *ngFor="let aluno of alunos; let i = index" class="aluno">
    <span class="nome">{{ aluno.nome }}</span>

    <button (click)="togglePresenca(i)">
      Presente: {{ aluno.presente ? '✅' : '❌' }}
    </button>

    <button (click)="toggleBiblia(i)" [disabled]="!aluno.presente">
      Bíblia: {{ aluno.biblia ? '✅' : '❌' }}
    </button>
  </div>

  <div class="resumo">
    <div class="campo">
      <label>Visitantes:</label>
      <input type="number" [(ngModel)]="visitantes" />
    </div>
    <div class="campo">
      <label>Oferta da Turma:</label>
      <input currencyMask [(ngModel)]="oferta"
        [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
      />
    </div>
  </div>

  <button class="finalizar" (click)="finalizarChamada()">Finalizar Chamada</button>
</div>